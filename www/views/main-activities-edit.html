<ion-view view-title="Activity">
	<ion-nav-buttons side="left">
		<button ng-click="$ionicGoBack()" class="button button-icon ion-arrow-left-c"></button>
	</ion-nav-buttons>
	<ion-nav-buttons side="right">
    <button ng-show="model.status === 'content.ready'" class="button button-icon icon" ng-class="model.edit.icon" ng-click="model.edit.handler()"></button>
		<button ng-show="model.status === 'edit.ready' || model.status === 'edit.error'" class="button button-icon icon" ng-class="model.save.icon" ng-click="model.save.handler()"></button>
	</ion-nav-buttons>
	<ion-content padding="true">

    <!-- loading -->
    <div ng-show="model.status === 'loading'" style="text-align: center; padding-top: 10em">
      <p>{{model.loading.message}}</p>
      <ion-spinner></ion-spinner>
    </div>

    <!-- error -->
    <div ng-show="model.status === 'error'" style="text-align: center; padding-top: 10em">
      <p>{{model.error.message}}</p>
      <button ng-click="model.error.retry.handler()" class="button button-positive">{{model.error.retry.label}}</button>
    </div>

		<!-- view mode -->
		<div ng-show="model.status === 'content.ready'">
			<div ng-show="model.message_save.length > 0" ng-style="{ 'background-color': model.message_edit.color }" style="text-align: center; padding: 0.5em; color: #FFFFFF">
				{{model.message_view.text}}
			</div>
			
			<div class="list card">

				<div class="item">
					<p style="font-weight: bold">{{model.activity.project === null ? '' : model.activity.project.name}}</p>
					<p>{{model.activity.task === null ? '' : model.activity.task.name}}</p>
				</div>

				<div class="item">
					<p>{{model.activity.date}}</p>
					<p>{{model.activity.duration}} / {{model.activity.overtime}}</p>
				</div>

			</div>

		</div>

		<!-- edit mode -->
		<div ng-show="model.status === 'edit.ready' || model.status === 'edit.error'">
			<div ng-show="model.message_edit.length > 0" ng-style="{ 'background-color': model.message_edit.color }" style="text-align: center; padding: 0.5em; color: #FFFFFF">
				{{model.message_edit.text}}
			</div>

			<div class="list card">
				<div class="item">
					<div style="text-align: center">{{model.activity.date | date: 'EEEE, d MMMM, yyyy'}}</div>
					<aima-calendar value="model.activity.date"></aima-calendar>
				</div>
				<div ng-click="model.selectProject()" class="item">
					{{model.activity.project === null ? '[select project]' : model.activity.project.name}}
				</div>
				<div ng-click="model.selectTask()" class="item">
					{{model.activity.task === null ? '[select task]' : model.activity.task.name}}
				</div>
				<div class="item">
					<div class="row">
						<div class="col">Duration:</div>
						<div class="col col-75"><aima-duration value="model.activity.duration" max="24" step="0.25"></aima-duration></div>
					</div>
				</div>
				<div class="item">
					<aima-duration value="model.activity.overtime" max="24" step="0.25"></aima-duration>
				</div>

			</div>

		</div>

	</ion-content>
</ion-view>